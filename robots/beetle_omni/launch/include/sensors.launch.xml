<?xml version="1.0"?>
<!-- Local launch for sensor interface -->
<launch>
  <arg name="robot_id" default="1"/>
  <arg name="robot_ns" default="gimbalrotor"/>
  <arg name="real_machine" default="True"/>
  <arg name="simulation" default="False"/>

  <group ns="$(arg robot_ns)">
    <group if="$(arg real_machine)">
      <group unless="$(arg simulation)">
        <!-- Launch spinal bridge including FC & IMU & GPS -->
        <include file="$(find spinal)/launch/bridge.launch" >
          <arg name="mode" value="serial"/>
          <arg name="serial_port" value="/dev/flight_controller"/>
          <arg name="serial_baud" value="921600"/>
        </include>
      </group>

      <!-- Launch mocap service -->
      <include file="$(find aerial_robot_base)/launch/external_module/mocap.launch">
	      <arg name="robot_id" value="$(arg robot_id)"/>
      </include>
    </group>

    <!-- Load basic configuration for sensors (e.g. noise sigma) [also for simulation] -->
    <rosparam file="$(find beetle)/config/sensors/imu/spinal.yaml" command="load"/>
    <rosparam file="$(find aerial_robot_base)/config/sensors/mocap.yaml" command="load"/>
  </group>
</launch>
