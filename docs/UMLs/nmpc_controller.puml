@startuml
'https://plantuml.com/class-diagram

set namespaceSeparator ::

abstract class aerial_robot_control::ControlBase {
    + ControlBase()
    + ~ControlBase()
    + initialize()
    + update()
    + activate()
    + reset()
    # template<class T> void getParam()
}

abstract class aerial_robot_control::nmpc::BaseMPC extends aerial_robot_control::ControlBase {
    # mpc_solver_ptr_
    + initialize()
    + activate()
    + update()
    + reset()
    # initPlugins() {}
    # initGeneralParams() = 0
    # initNMPCCostW() = 0
    # initNMPCConstraints() = 0
    # initNMPCParams() = 0
    # prepareNMPCRef() = 0
    # prepareNMPCParams() = 0
    # callbackSetRefXU() = 0
    # meas2VecX() = 0
    # controlCore() = 0
    # sendCmd() = 0
    # callbackViz() = 0
    # resetPlugins() {}
    # initPredXU()
    # rosXU2VecXU()
}

class aerial_robot_control::nmpc::FixQdNMPC extends aerial_robot_control::nmpc::TiltQdServoNMPC {
'x_dim = 13, u_dim = 4, p_dim = 4'
    # initMPCSolverPtr()
    # initAllocMat()
}

'class aerial_robot_control::nmpc::TiltQdNMPC extends aerial_robot_control::nmpc::FixQdNMPC {
''x_dim = 13, u_dim = 8'
'    + TiltQdNMPC()
'    + ~TiltQdNMPC()
'    + initialize()
'    + update()
'    + reset()
'}

class aerial_robot_control::nmpc::TiltQdServoNMPC extends aerial_robot_control::nmpc::BaseMPC {
'x_dim = 17, u_dim = 8, p_dim = 4'
    + TiltQdServoNMPC()
    + ~TiltQdServoNMPC()
    + activate()
    + initialize()
    + update()
    + reset()
    # initGeneralParams()
    # initNMPCCostW()
    # initNMPCConstraints()
    # setControlMode()
    # initActuatorStates()
    # initNMPCParams()
    # initAllocMat()
    # updateInertialParams()
    # PhysToNMPCParams()
    # modifyVelConstraints()
    # controlCore()
    # sendCmd()
    # prepareNMPCRef()
    # prepareNMPCParams()
    # callbackViz()
    # callbackJointStates()
    # callbackSetRPY()
    # callbackSetRefXU()
    # callbackSetRefTraj()
    # cfgNMPCCallback()
    # getOdom()
    # getCommand()
    # meas2VecX()
    # printPhysicalParams()
    # setXrUrRef()
    # allocateToXU()
}

abstract class aerial_robot_control::nmpc::TiltQdServoDistNMPC extends aerial_robot_control::nmpc::TiltQdServoNMPC {
'x_dim = 23, u_dim = 8， p_dim = 4'
    + initialize()
    # initMPCSolverPtr()
    # meas2VecX()
    # calcDisturbWrench() = 0
    # callbackViz()
}

class aerial_robot_control::nmpc::TiltQdServoNMPCwITerm extends aerial_robot_control::nmpc::TiltQdServoDistNMPC {
'x_dim = 23, u_dim = 8， p_dim = 4'
    # initParams()
    # calcDisturbWrench()
    # cfgNMPCCallback()
}

class aerial_robot_control::nmpc::TiltQdServoNMPCwEKF extends aerial_robot_control::nmpc::TiltQdServoDistNMPC {
'x_dim = 23, u_dim = 8, p_dim = 4'
unfinished
    # initParams()
    # calcDisturbWrench()
    # cfgNMPCCallback()
}

class aerial_robot_control::nmpc::TiltQdServoNMPCwMHE extends aerial_robot_control::nmpc::TiltQdServoNMPCwEKF {
'x_dim = 23, u_dim = 8, p_dim = 4'
unfinished
    + TiltQdServoNMPCwMHE()
    + ~TiltQdServoNMPCwMHE()
    + initialize()
    + update()
    + reset()
}

class aerial_robot_control::nmpc::TiltQdServoThrustNMPCwEKF extends aerial_robot_control::nmpc::TiltQdServoNMPCwEKF {
'x_dim = 27, u_dim = 8, p_dim = 4'
unfinished
    + TiltQdServoThrustNMPCwEKF()
    + ~TiltQdServoThrustNMPCwEKF()
    + initialize()
    + update()
    + reset()
}

class aerial_robot_control::nmpc::TiltTriServoNMPC extends aerial_robot_control::nmpc::TiltQdServoNMPC {
'x_dim = 16, u_dim = 6, p_dim = 4'
    # initMPCSolverPtr()
    # initAllocMat()
}

class aerial_robot_control::nmpc::TiltBiServoNMPC extends aerial_robot_control::nmpc::TiltQdServoNMPC {
'x_dim = 15, u_dim = 4, p_dim = 4'
    # initMPCSolverPtr()
    # initAllocMat()
}

class aerial_robot_control::nmpc::TiltBi2OrdServoNMPC extends aerial_robot_control::nmpc::TiltBiServoNMPC {
'x_dim = 17, u_dim = 4, p_dim = 4'
    # initMPCSolverPtr()
    # initCostW()
    # initJointStates()
    # meas2VecX()
    # callbackJointStates()
    # cfgNMPCCallback()
}

@enduml
